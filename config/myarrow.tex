\ProvidesPackage{myarrow}[2025A]

\RequirePackage{amsmath}
\RequirePackage{tikz-cd}

\makeatletter
\newbox\xratbelow
\newbox\xratabove

\renewcommand{\xrightarrow}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [->, baseline=-.75ex]
		\draw (0,0) -- node[below=-2pt] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}

% 重定义 \xlefttarrow[below]{above}
\renewcommand{\xleftarrow}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [<-, baseline=-.75ex]
		\draw (0,0) -- node[below] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}


% 重定义 \xleftrightarrow[below]{above}
\renewcommand{\xleftrightarrow}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [<->, baseline=-.75ex]
		\draw (0,0) -- node[below] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}


% 重定义 \xhookrightarrow[below]{above}, 使用 tikz-cd 的 hookrightarrow
\renewcommand{\xhookrightarrow}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [baseline=-.75ex]
		\draw (0,0) edge[commutative diagrams/hookrightarrow] node[below] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}

% 重定义 \xhooklefttarrow[below]{above}, 使用 tikz-cd 的 hookleftarrow
\renewcommand{\xhookleftarrow}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [baseline=-.75ex]
		\draw (0,0) edge[commutative diagrams/hookleftarrow] node[below] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}


% 重定义 \xmapsto[below]{above}, 使用 tikz-cd 的 mapsto
\renewcommand{\xmapsto}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [baseline=-.75ex]
		\draw (0,0) edge[commutative diagrams/mapsto] node[below] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}

% 定义 \xlongequal[below]{above}, 使用 tikz-cd 的等号
\newcommand{\xlongequal}[2][]{%
	\setbox\xratbelow=\hbox{\ensuremath{\scriptstyle #1}}%
	\setbox\xratabove=\hbox{\ensuremath{\scriptstyle #2}}%
	\pgfmathsetlengthmacro{\xratlen}{max(\wd\xratbelow, \wd\xratabove) + .6em}%
	\mathrel{\tikz [baseline=-.75ex]
		\draw (0,0) edge[commutative diagrams/equal] node[below] {\box\xratbelow}
		node[above] {\box\xratabove}
		(\xratlen,0) ;}}

\makeatother
\endinput